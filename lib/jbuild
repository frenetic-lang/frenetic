(jbuild_version 1)

;; This declare the hello_world executable implemented by hello_world.ml
;; (executable
;;  ((name hello_world)))

;; preprocessing using cppo
(rule
 ((targets (Frenetic_NetKAT_Generated_Parser.mly))
  (deps    (Frenetic_NetKAT_Generated_Parser.cppo.mly Frenetic_NetKAT.ml))
  (action  (run ${bin:cppo} ${<} -n -o ${@}))))

(library
 ((name        frenetic)
  (public_name frenetic)
  (libraries (core cppo))
  (preprocess (pps (ppx_jane)))
  (preprocess (action (run ${bin:cppo} -V OCAML:${ocaml_version} ${<})))  
 )
)

;; TODO: toplevel
;; (executable
;;  ((name       mytoplevel)
;;   (libraries  (compiler-libs.toplevel mylib))
;;   (link_flags (-linkall))
;;   (modes      (byte))))
